<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft ç»Ÿè®¡æ•°æ®è§£æå™¨</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        .filter-group {
    margin-bottom: 15px;
}

.search-input {
    padding: 8px 12px;
    width: 100%;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
    margin-bottom: 10px;
    display: block !important;
    visibility: visible !important;
}

.search-input:focus {
    outline: none;
    border-color: #80bdff;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

#playerSearchContainer {
    display: block !important;
    visibility: visible !important;
}
        
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .description {
            text-align: center;
            margin-bottom: 30px;
            color: #666;
        }
        
        .upload-area {
            border: 2px dashed #ccc;
            padding: 30px;
            text-align: center;
            margin: 20px 0;
            border-radius: 8px;
            transition: border-color 0.3s, background-color 0.3s;
            background-color: white;
        }
        
        .upload-area:hover {
            border-color: #4CAF50;
            background-color: #f9f9f9;
        }

        .upload-area.dragover {
            border-color: #4CAF50;
            background-color: #e8f5e9;
        }
        
        .search-container {
            margin: 20px 0;
            text-align: center;
        }
        #item-search {
            padding: 8px;
            width: 300px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        #fileInput {
            display: none;
        }
        
        .upload-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .upload-btn:hover {
            background-color: #45a049;
        }
        
        #fileInfo {
            margin-top: 10px;
            color: #666;
        }
        
        .loading {
            color: #666;
            font-style: italic;
            text-align: center;
            padding: 20px;
        }
        
        .error {
            color: #dc3545;
            padding: 15px;
            background-color: #f8d7da;
            border-radius: 4px;
            margin: 15px 0;
            border: 1px solid #f5c6cb;
        }
        
        .filters {
            margin: 20px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
        }
        
        .filter-group {
            flex: 1;
            min-width: 150px; /* å‡å°æœ€å°å®½åº¦é™åˆ¶ */
        }
        
        .filter-label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .category-filter, .sort-select {
            width: 100%;
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid #ddd;
            font-size: 16px;
        }
        
        /* è¡¨æ ¼æ ·å¼ - å“åº”å¼è®¾è®¡ */
        .stats-container {
            margin: 20px 0;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stats-table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
        }
        
        .stats-table th, 
        .stats-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .stats-table th {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
        }
        
        .stats-table tr:hover {
            background-color: #f9f9f9;
        }
        
        /* å“åº”å¼æ ·å¼ */
        @media (max-width: 768px) {
            /* åœ¨ä¸­ç­‰å±å¹•ä¸Šå˜ä¸ºä¸¤åˆ—å¸ƒå±€ */
            .stats-table thead {
                display: none;
            }
            
            .stats-table tr {
                display: block;
                margin-bottom: 15px;
                border: 1px solid #ddd;
                border-radius: 4px;
            }
            
            .stats-table td {
                display: block;
                text-align: right;
                position: relative;
                padding-left: 50%;
            }
            
            .stats-table td::before {
                content: attr(data-label);
                position: absolute;
                left: 0;
                width: 50%;
                padding-left: 12px;
                text-align: left;
                font-weight: bold;
            }
            
            /* éšè—ç±»åˆ«åˆ—ï¼Œå°†ç±»åˆ«ä½œä¸ºæ ‡é¢˜æ˜¾ç¤º */
            .stats-table td:nth-child(1) {
                background-color: #f0f0f0;
                font-weight: bold;
                text-align: center;
                padding: 12px;
            }
            
            .stats-table td:nth-child(1)::before {
                display: none;
            }
            
            .stats-table td:nth-child(2) {
                border-bottom: 1px solid #eee;
            }
        }
        
        @media (max-width: 480px) {
            /* æ–°å¢åŸºç¡€æ ·å¼é‡ç½® */
            html, body {
                width: 100% !important;
                overflow-x: hidden !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            /* åœ¨å°å±å¹•ä¸Šå˜ä¸ºå•åˆ—å¸ƒå±€ */
            .stats-table td {
                display: block !important;
                text-align: left !important;
                padding: 8px 12px !important;
                position: relative !important;
                width: 100% !important;
            }
            
            .stats-table td::before {
                display: block !important;
                width: 100% !important;
                padding-left: 0 !important;
                margin-bottom: 4px !important;
            }
            
            .stats-table td:nth-child(1) {
                padding: 12px !important;
            }
            
            .stats-table td:nth-child(2),
            .stats-table td:nth-child(3) {
                padding-left: 12px !important;
            }
            
            /* ä¼˜åŒ–è¿‡æ»¤å™¨å®¹å™¨å¸ƒå±€ */
            .filters {
                flex-direction: column !important;
                gap: 10px !important;
                align-items: stretch !important;
                padding: 0 5px !important;
                width: 100% !important;
                box-sizing: border-box !important;
            }
            
            .filter-group {
                min-width: 100% !important;
                width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            /* ç¡®ä¿æ‰€æœ‰è¾“å…¥å…ƒç´ é€‚åº”å®¹å™¨ */
            .search-input, .category-filter, .sort-select {
                width: 100% !important;
                min-width: unset !important;
                box-sizing: border-box !important;
                padding: 8px !important;
            }
            
            /* è°ƒæ•´å®¹å™¨æ ·å¼ */
            .container {
                padding: 0 10px !important;
                width: 100% !important;
                max-width: 100% !important;
                box-sizing: border-box !important;
            }
            
            /* ä¿®å¤è¡¨æ ¼å®¹å™¨æº¢å‡ºé—®é¢˜ */
            .stats-container {
                width: 100% !important;
                overflow-x: hidden !important;
            }
        }
    </style>
    <script src="https://s4.zstatic.net/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <div class="container">
    <div style="position: relative;">
    <h1>Minecraft ç»Ÿè®¡æ•°æ®è§£æå™¨</h1>
    <button id="languageButton" style="position: absolute; top: 0; right: 0; background-color: #28a745; color: white; width: 30px; height: 30px; border-radius: 50%; border: none; font-size: 18px; cursor: pointer; margin-right: 70px; text-align: center; line-height: 30px;" onclick="window.location.href='en_us/index.html'">ğŸŒ</button>
    <button id="helpButton" style="position: absolute; top: 0; right: 0; background-color: #007bff; color: white; width: 30px; height: 30px; border-radius: 50%; border: none; font-size: 18px; cursor: pointer; margin-right: 35px;">?</button>
    <button id="changelogButton" style="position: absolute; top: 0; right: 0; background-color: #ffc107; color: white; width: 30px; height: 30px; border-radius: 50%; border: none; font-size: 18px; cursor: pointer;">!</button>
</div>
    <p class="description">ä¸Šä¼ æ‚¨çš„Minecraftç»Ÿè®¡æ•°æ®æ–‡ä»¶ï¼ŒæŸ¥çœ‹è¯¦ç»†çš„ç©å®¶ç»Ÿè®¡ä¿¡æ¯ã€‚</p>

        <div class="upload-area">
            <button class="upload-btn" onclick="document.getElementById('fileInput').click()">é€‰æ‹©æ–‡ä»¶</button>
            <input type="file" id="fileInput" accept=".json,.zip,.lang">
            <p id="fileInfo">æœªé€‰æ‹©æ–‡ä»¶</p>
        </div>

        <div id="loading" class="loading" style="display: none;">æ­£åœ¨è§£ææ•°æ®...</div>
        <div id="error" class="error" style="display: none;"></div>

        <div id="filters" class="filters" style="display: none;">
            <!-- æ·»åŠ æœç´¢æ¡† -->
            <div class="filter-group" id="playerSearchContainer">
                <label for="playerSearch" class="filter-label">æœç´¢ç©å®¶ï¼š</label>
                <input type="text" id="playerSearch" class="search-input" placeholder="è¾“å…¥ç©å®¶åç§°æˆ–UUID">
            </div>
            
            <!-- ç©å®¶é€‰æ‹©å°†åœ¨è¿™é‡ŒåŠ¨æ€æ’å…¥ -->
            
            <div class="filter-group">
                <label for="categoryFilter" class="filter-label">æŒ‰ç±»åˆ«ç­›é€‰ï¼š</label>
                <select id="categoryFilter" class="category-filter">
                    <option value="all">æ‰€æœ‰ç±»åˆ«</option>
                    <!-- ç±»åˆ«å°†åŠ¨æ€ç”Ÿæˆ -->
                </select>
            </div>
            
            <div class="filter-group">
                <label for="sortSelect" class="filter-label">æ’åºæ–¹å¼ï¼š</label>
                <select id="sortSelect" class="sort-select">
                    <option value="category">æŒ‰ç±»åˆ«</option>
                    <option value="count-asc">æ•°é‡ï¼ˆå‡åºï¼‰</option>
                    <option value="count-desc">æ•°é‡ï¼ˆé™åºï¼‰</option>
                </select>
            </div>
        </div>

        <div class="stats-container">
            <div class="search-container" style="display: none;">
                <input type="text" id="item-search" placeholder="æœç´¢ç‰©å“...">
            </div>
            <div id="tableContainer"></div>
        </div>
    </div>

    <script>
        // å­˜å‚¨ç¿»è¯‘æ•°æ®
        let translations = {
            category: {},
            item: {}
        };
        
        // æ·»åŠ æ ‡å¿—å˜é‡è¡¨ç¤ºæ˜¯å¦å·²ä¸Šä¼ ç¿»è¯‘æ–‡ä»¶
        let translationFileUploaded = false;
        
        // å­˜å‚¨ç”¨æˆ·ç¼“å­˜æ•°æ® - æ–°å¢
        let userCache = {};

        // åœ¨æ ‡ç­¾å†…ï¼ŒuserCacheå˜é‡åæ·»åŠ 
        // å­˜å‚¨æ‰€æœ‰ç©å®¶çš„ç»Ÿè®¡æ•°æ®
        let allPlayersStats = {};
        // å­˜å‚¨UUIDåˆ°æ–‡ä»¶åçš„æ˜ å°„
        let uuidToFilename = {};

        // ä¿®æ”¹æ–‡ä»¶ä¸Šä¼ å¤„ç†å‡½æ•°
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            handleFileUpload(file);
        });

        // æ·»åŠ æ‹–æ‹½ä¸Šä¼ åŠŸèƒ½
        const uploadArea = document.querySelector('.upload-area');

        // é˜»æ­¢æµè§ˆå™¨é»˜è®¤æ‹–æ”¾è¡Œä¸º
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            uploadArea.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        // æ·»åŠ æ‹–æ‹½è§†è§‰åé¦ˆ
        ['dragenter', 'dragover'].forEach(eventName => {
            uploadArea.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            uploadArea.addEventListener(eventName, unhighlight, false);
        });

        function highlight() {
            uploadArea.classList.add('dragover');
        }

        function unhighlight() {
            uploadArea.classList.remove('dragover');
        }

        // å¤„ç†æ‹–æ”¾æ–‡ä»¶
        uploadArea.addEventListener('drop', handleDrop, false);

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const file = dt.files[0];
            if (file) {
                handleFileUpload(file);
            }
        }

        // é‡æ„æ–‡ä»¶å¤„ç†é€»è¾‘ä¸ºé€šç”¨å‡½æ•°
        function handleFileUpload(file) {
            // Show file name
            document.getElementById('fileInfo').textContent = `Selected: ${file.name}`;

            // Show loading state
            document.getElementById('loading').style.display = 'block';
            document.getElementById('error').style.display = 'none';
            document.getElementById('tableContainer').innerHTML = '';
            document.getElementById('filters').style.display = 'none';
            
            // éšè—ç‰©å“æœç´¢æ¡†
            const searchContainer = document.querySelector('.search-container');
            if (searchContainer) {
                searchContainer.style.display = 'none';
            }

            // æ£€æŸ¥æ˜¯å¦ä¸ºç¿»è¯‘æ–‡ä»¶
    if (file.name.toLowerCase().endsWith('.lang') || 
        (file.name.toLowerCase().endsWith('.json') && 
         file.name.toLowerCase().includes('translation'))) {
        handleTranslationFile(file);
        return;
    }

    // æ£€æŸ¥æ˜¯å¦ä¸ºZIPæ–‡ä»¶
    if (file.name.toLowerCase().endsWith('.zip')) {
        handleZipFile(file);
    } else if (file.name.toLowerCase() === 'usercache.json') {
        // å•ç‹¬å¤„ç†usercache.jsonæ–‡ä»¶
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                document.getElementById('loading').style.display = 'none';
                const success = processUserCache(e.target.result);
                if (success) {
                    document.getElementById('error').textContent = 'ç”¨æˆ·ç¼“å­˜æ•°æ®åŠ è½½æˆåŠŸï¼ç°åœ¨å¯ä»¥ä¸Šä¼ ç»Ÿè®¡æ•°æ®æ–‡ä»¶æˆ–ZIPå‹ç¼©åŒ…ã€‚';
                    document.getElementById('error').style.display = 'block';
                    document.getElementById('error').style.backgroundColor = '#d4edda';
                    document.getElementById('error').style.color = '#155724';
                    document.getElementById('error').style.borderColor = '#c3e6cb';
                    // å¦‚æœå·²æœ‰ç©å®¶æ•°æ®ï¼Œæ›´æ–°ç©å®¶åç§°
                    updatePlayerSelect();
                } else {
                    document.getElementById('error').textContent = 'æ— æ³•è§£æusercache.jsonæ–‡ä»¶ã€‚è¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼ã€‚';
                    document.getElementById('error').style.display = 'block';
                }
            } catch (error) {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').textContent = `è§£ææ–‡ä»¶æ—¶å‡ºé”™: ${error.message}`;
                document.getElementById('error').style.display = 'block';
            }
        };
        reader.readAsText(file);
    } else {
        // å¤„ç†å•ä¸ªç»Ÿè®¡æ•°æ®æ–‡ä»¶
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                document.getElementById('loading').style.display = 'none';
                // å¤„ç†æ™®é€šç»Ÿè®¡æ•°æ®æ–‡ä»¶
                const processedData = processMinecraftStats(e.target.result);

                if (processedData && processedData.length > 0) {
                    // å°è¯•ä»æ–‡ä»¶åæå–UUID
                    const fileName = file.name;
                    const uuidMatch = fileName.match(/([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})/i);
                    let playerName = 'æœªçŸ¥ç©å®¶';
                    let uuid = null;

                    if (uuidMatch && uuidMatch[1]) {
                        uuid = uuidMatch[1];
                        playerName = getPlayerName(uuid);
                        // å­˜å‚¨ç©å®¶æ•°æ®
                        allPlayersStats[uuid] = processedData;
                        uuidToFilename[uuid] = fileName;
                    }

                    // åœ¨è¡¨æ ¼ä¸Šæ–¹æ˜¾ç¤ºç©å®¶åç§°
                    const tableContainer = document.getElementById('tableContainer');
                    tableContainer.innerHTML = `<h2>ç©å®¶: ${playerName}</h2>`;

                    displayAsTable(processedData);
                    // æ›´æ–°ç©å®¶é€‰æ‹©ä¸‹æ‹‰æ¡†
                    updatePlayerSelect();
                } else {
                    document.getElementById('error').textContent = 'æœªæ‰¾åˆ°æœ‰æ•ˆæ•°æ®ã€‚è¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼ã€‚';
                    document.getElementById('error').style.display = 'block';
                }
            } catch (error) {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').textContent = `è§£ææ–‡ä»¶æ—¶å‡ºé”™: ${error.message}`;
                document.getElementById('error').style.display = 'block';
            }
        };
        reader.readAsText(file);
    }
        }

        // æ·»åŠ å¤„ç†ç¿»è¯‘æ–‡ä»¶çš„å‡½æ•°
        function handleTranslationFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    document.getElementById('loading').style.display = 'none';
                    let translationData;

                    if (file.name.toLowerCase().endsWith('.json')) {
                        // å¤„ç†JSONæ ¼å¼çš„ç¿»è¯‘æ–‡ä»¶
                        translationData = JSON.parse(e.target.result);
                    } else if (file.name.toLowerCase().endsWith('.lang')) {
                        // å¤„ç†Minecraftçš„.langæ ¼å¼ç¿»è¯‘æ–‡ä»¶
                        translationData = parseLangFile(e.target.result);
                    }

                    if (translationData) {
                        translations = translationData;
                        translationFileUploaded = true;
                        console.log('ç¿»è¯‘æ–‡ä»¶åŠ è½½æˆåŠŸ', translations);
                        document.getElementById('error').textContent = 'ç¿»è¯‘æ–‡ä»¶åŠ è½½æˆåŠŸï¼';
                        document.getElementById('error').style.display = 'block';
                        document.getElementById('error').style.backgroundColor = '#d4edda';
                        document.getElementById('error').style.color = '#155724';
                        document.getElementById('error').style.borderColor = '#c3e6cb';

                        // å¦‚æœå·²æœ‰ç©å®¶æ•°æ®ï¼Œé‡æ–°å¤„ç†å¹¶æ˜¾ç¤º
                        if (Object.keys(allPlayersStats).length > 0) {
                            const firstUuid = Object.keys(allPlayersStats)[0];
                            showPlayerStats(firstUuid);
                        }
                    }
                } catch (error) {
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('error').textContent = `è§£æç¿»è¯‘æ–‡ä»¶æ—¶å‡ºé”™: ${error.message}`;
                    document.getElementById('error').style.display = 'block';
                }
            };
            reader.readAsText(file);
        }

        // æ·»åŠ è§£æ.langæ–‡ä»¶çš„å‡½æ•°
        function parseLangFile(content) {
            const lines = content.split('\n');
            const result = {
                category: {},
                item: {}
            };

            lines.forEach(line => {
                // è·³è¿‡æ³¨é‡Šå’Œç©ºè¡Œ
                if (line.startsWith('#') || line.trim() === '') return;

                const parts = line.split('=');
                if (parts.length !== 2) return;

                const key = parts[0].trim();
                const value = parts[1].trim();

                // å°è¯•è¯†åˆ«ç±»åˆ«å’Œç‰©å“
                if (key.startsWith('stat.category.')) {
                    const category = key.replace('stat.category.', '');
                    result.category[category] = value;
                } else if (key.startsWith('item.minecraft.')) {
                    const item = key.replace('item.minecraft.', '');
                    result.item[item] = value;
                } else if (key.startsWith('block.minecraft.')) {
                    const block = key.replace('block.minecraft.', '');
                    result.item[block] = value;
                }
            });

            return result;
        }

        // æ·»åŠ å¤„ç†ZIPæ–‡ä»¶çš„å‡½æ•°
        function handleZipFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                JSZip.loadAsync(e.target.result)
                    .then(function(zip) {
                        // å­˜å‚¨è§£æçš„æ–‡ä»¶æ•°
                        let processedFiles = 0;
                        let totalFiles = 0;
                        let hasUserCache = false;

                        // å…ˆæ£€æŸ¥æ–‡ä»¶æ€»æ•°
                        zip.forEach(function(relativePath, zipEntry) {
                            totalFiles++;
                        });

                        // éå†ZIPä¸­çš„æ‰€æœ‰æ–‡ä»¶
                        zip.forEach(function(relativePath, zipEntry) {
                            if (zipEntry.name.toLowerCase() === 'usercache.json') {
                                // å¤„ç†usercache.json
                                zipEntry.async('text')
                                    .then(function(content) {
                                        processUserCache(content);
                                        hasUserCache = true;
                                        processedFiles++;
                                        checkIfAllFilesProcessed();
                                    })
                                    .catch(function(error) {
                                        console.error('è¯»å–usercache.jsonå¤±è´¥:', error);
                                        processedFiles++;
                                        checkIfAllFilesProcessed();
                                    });
                            } else if (zipEntry.name.toLowerCase().endsWith('.json')) {
                                // å¤„ç†ç»Ÿè®¡æ•°æ®æ–‡ä»¶
                                zipEntry.async('text')
                                    .then(function(content) {
                                        const fileName = zipEntry.name;
                                        const uuidMatch = fileName.match(/([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})/i);

                                        if (uuidMatch && uuidMatch[1]) {
                                            const uuid = uuidMatch[1];
                                            const processedData = processMinecraftStats(content);
                                            if (processedData && processedData.length > 0) {
                                                allPlayersStats[uuid] = processedData;
                                                uuidToFilename[uuid] = fileName;
                                            }
                                        }
                                        processedFiles++;
                                        checkIfAllFilesProcessed();
                                    })
                                    .catch(function(error) {
                                        console.error('è¯»å–JSONæ–‡ä»¶å¤±è´¥:', error);
                                        processedFiles++;
                                        checkIfAllFilesProcessed();
                                    });
                            } else {
                                processedFiles++;
                                checkIfAllFilesProcessed();
                            }
                        });

                        function checkIfAllFilesProcessed() {
                            if (processedFiles === totalFiles) {
                                document.getElementById('loading').style.display = 'none';
                                
                                if (Object.keys(allPlayersStats).length === 0) {
                                    document.getElementById('error').textContent = 'æœªæ‰¾åˆ°æœ‰æ•ˆçš„ç©å®¶ç»Ÿè®¡æ•°æ®æ–‡ä»¶ã€‚';
                                    document.getElementById('error').style.display = 'block';
                                } else {
                                    // æ›´æ–°ç©å®¶é€‰æ‹©ä¸‹æ‹‰æ¡†
                                    updatePlayerSelect();

                                    if (hasUserCache) {
                                        document.getElementById('error').textContent = 'ZIPæ–‡ä»¶è§£ææˆåŠŸï¼å·²åŠ è½½' + Object.keys(allPlayersStats).length + 'ä½ç©å®¶çš„æ•°æ®ã€‚';
                                        document.getElementById('error').style.display = 'block';
                                        document.getElementById('error').style.backgroundColor = '#d4edda';
                                        document.getElementById('error').style.color = '#155724';
                                        document.getElementById('error').style.borderColor = '#c3e6cb';
                                    } else {
                                        document.getElementById('error').textContent = 'ZIPæ–‡ä»¶è§£ææˆåŠŸï¼Œä½†æœªæ‰¾åˆ°usercache.jsonæ–‡ä»¶ã€‚ç©å®¶åç§°å°†æ˜¾ç¤ºä¸ºUUIDã€‚';
                                        document.getElementById('error').style.display = 'block';
                                        document.getElementById('error').style.backgroundColor = '#fff3cd';
                                        document.getElementById('error').style.color = '#856404';
                                        document.getElementById('error').style.borderColor = '#ffeeba';
                                    }

                                    // æ˜¾ç¤ºç¬¬ä¸€ä¸ªç©å®¶çš„æ•°æ®
                                    const firstUuid = Object.keys(allPlayersStats)[0];
                                    showPlayerStats(firstUuid);
                                }
                            }
                        }
                    })
                    .catch(function(error) {
                        document.getElementById('loading').style.display = 'none';
                        document.getElementById('error').textContent = `è§£æZIPæ–‡ä»¶æ—¶å‡ºé”™: ${error.message}`;
                        document.getElementById('error').style.display = 'block';
                    });
            };
            reader.readAsArrayBuffer(file);
        }

        // æ·»åŠ æ›´æ–°ç©å®¶é€‰æ‹©ä¸‹æ‹‰æ¡†çš„å‡½æ•°
        function updatePlayerSelect() {
    console.log('updatePlayerSelectè¢«è°ƒç”¨');
    let playerSelect = document.getElementById('playerSelect');
    
    // å¦‚æœç©å®¶é€‰æ‹©å·²å­˜åœ¨ï¼Œå…ˆç§»é™¤å®ƒ
    if (playerSelect) {
        playerSelect.parentNode.remove();
    }
    
    // åˆ›å»ºæ–°çš„ç©å®¶é€‰æ‹©ä¸‹æ‹‰æ¡†
    const searchContainer = document.getElementById('playerSearchContainer');
    const filterGroup = document.createElement('div');
    filterGroup.className = 'filter-group';
    filterGroup.innerHTML = `
        <label for="playerSelect" class="filter-label">é€‰æ‹©ç©å®¶ï¼š</label>
        <select id="playerSelect" class="category-filter">
        </select>
    `;
    
    // ç¡®ä¿æ’å…¥ä½ç½®æ­£ç¡®
    if (searchContainer) {
        // å°†ç©å®¶é€‰æ‹©æ’å…¥åˆ°æœç´¢æ¡†åé¢
        searchContainer.insertAdjacentElement('afterend', filterGroup);
        playerSelect = document.getElementById('playerSelect');

        playerSelect.addEventListener('change', function() {
            const selectedUuid = this.value;
            if (selectedUuid) {
                showPlayerStats(selectedUuid);
            }
        });
    } else {
        console.error('æœç´¢å®¹å™¨æœªæ‰¾åˆ°ï¼Œæ— æ³•åˆ›å»ºç©å®¶é€‰æ‹©ä¸‹æ‹‰æ¡†');
    }

    // å¡«å……ç©å®¶é€‰é¡¹
    if (playerSelect) {
        playerSelect.innerHTML = '';
        Object.keys(allPlayersStats).forEach(uuid => {
            const playerName = getPlayerName(uuid);
            const option = document.createElement('option');
            option.value = uuid;
            option.textContent = `${playerName} (${uuidToFilename[uuid]})`;
            playerSelect.appendChild(option);
        });
    }
}

        // æ·»åŠ æ˜¾ç¤ºç©å®¶ç»Ÿè®¡æ•°æ®çš„å‡½æ•°
        function showPlayerStats(uuid) {
            const processedData = allPlayersStats[uuid];
            if (processedData) {
                const playerName = getPlayerName(uuid);
                const tableContainer = document.getElementById('tableContainer');
                tableContainer.innerHTML = `<h2>ç©å®¶: ${playerName}</h2>`;
                displayAsTable(processedData);
            }
        }


        // æ·»åŠ å¤„ç†usercache.jsonæ–‡ä»¶çš„å‡½æ•° - æ–°å¢
        function processUserCache(jsonData) {
            try {
                const data = typeof jsonData === 'string' ? JSON.parse(jsonData) : jsonData;
                if (Array.isArray(data)) {
                    data.forEach(user => {
                        if (user.uuid && user.name) {
                            // å­˜å‚¨UUIDåˆ°åç§°çš„æ˜ å°„
                            userCache[user.uuid] = user.name;
                        }
                    });
                    console.log('ç”¨æˆ·ç¼“å­˜æ•°æ®åŠ è½½æˆåŠŸ', userCache);
                    return true;
                }
                return false;
            } catch (error) {
                console.error('å¤„ç†ç”¨æˆ·ç¼“å­˜æ•°æ®æ—¶å‡ºé”™:', error);
                return false;
            }
        }

        // æ ¹æ®UUIDè·å–ç©å®¶åç§° - æ–°å¢
        function getPlayerName(uuid) {
            return userCache[uuid] || 'æœªçŸ¥ç©å®¶';
        }

        // åŠ è½½ç¿»è¯‘æ–‡ä»¶
        function loadTranslations() {
    // å¦‚æœå·²ç»ä¸Šä¼ äº†ç¿»è¯‘æ–‡ä»¶ï¼Œç›´æ¥è¿”å›
    if (translationFileUploaded) {
        console.log('ä½¿ç”¨å·²ä¸Šä¼ çš„ç¿»è¯‘æ–‡ä»¶');
        return Promise.resolve(translations);
    }

    // å°è¯•ä½¿ç”¨fetchåŠ è½½é»˜è®¤ç¿»è¯‘æ–‡ä»¶
    return fetch('translations.json')
        .then(response => {
            if (!response.ok) {
                throw new Error('ç¿»è¯‘æ–‡ä»¶åŠ è½½å¤±è´¥: ' + response.statusText);
            }
            return response.json();
        })
        .then(data => {
            translations = data;
            console.log('é»˜è®¤ç¿»è¯‘æ–‡ä»¶åŠ è½½æˆåŠŸ', translations);
            return translations;
        })
        .catch(error => {
            console.error('åŠ è½½é»˜è®¤ç¿»è¯‘æ–‡ä»¶æ—¶å‡ºé”™:', error);
            // ä½¿ç”¨é»˜è®¤ç¿»è¯‘
            return translations;
        });
}

        // å¤„ç† Minecraft ç»Ÿè®¡æ•°æ®
        function processMinecraftStats(jsonData) {
            try {
                const data = typeof jsonData === 'string' ? JSON.parse(jsonData) : jsonData;
                const stats = data.stats || {};
                const result = [];

                // éå†æ‰€æœ‰ç»Ÿè®¡ç±»åˆ«
                for (const [category, items] of Object.entries(stats)) {
                    // æå–ç±»åˆ«åç§°ï¼ˆç§»é™¤ 
                    const categoryName = category.replace('minecraft:', '');
                    // ç¿»è¯‘ç±»åˆ«åç§°
                    const translatedCategory = translations.category[categoryName] || categoryName;
        
                    // Iterate through all items in the category
                    for (const [item, count] of Object.entries(items)) {
                        // Extract item name (remove "minecraft:" prefix)
                        const itemName = item.replace('minecraft:', '');
                        // ç¿»è¯‘ç‰©å“åç§°
                        const translatedItem = translations.item[itemName] || itemName;
        
                        result.push({
                category: translatedCategory,
                originalCategory: categoryName, // æ–°å¢ï¼šä¿ç•™åŸå§‹ç±»åˆ«ID
                item: translatedItem,
                originalItem: itemName, // æ–°å¢ï¼šä¿ç•™åŸå§‹ç‰©å“ID
                count: count
            });
                    }
                }
        
                return result;
            } catch (error) {
                console.error('Error processing data:', error);
                return null;
            }
        }
        
        // åœ¨é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadTranslations();
            // åˆå§‹åŒ–ç­›é€‰å™¨å¸ƒå±€
            initFiltersLayout();
        });
        
        // åˆå§‹åŒ–ç­›é€‰å™¨å¸ƒå±€
        function initFiltersLayout() {
            // ç¡®ä¿ç­›é€‰å™¨å®¹å™¨å¯è§
            const filtersContainer = document.getElementById('filters');
            if (filtersContainer) {
                filtersContainer.style.display = 'flex';
                // è°ƒç”¨updatePlayerSelectæ¥åˆ›å»ºç©å®¶é€‰æ‹©ä¸‹æ‹‰æ¡†
                updatePlayerSelect();
                // ç„¶åå¯ä»¥éšè—ç­›é€‰å™¨ï¼Œç›´åˆ°æœ‰æ•°æ®
                filtersContainer.style.display = 'none';
            }
        }

        // åœ¨æ–‡ä»¶åŠ è½½å®Œæˆåæ·»åŠ æœç´¢åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('playerSearch');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const playerSelect = document.getElementById('playerSelect');
                    if (playerSelect) {
                        const options = playerSelect.options;
                        for (let i = 0; i < options.length; i++) {
                            const option = options[i];
                            const text = option.text.toLowerCase();
                            option.style.display = text.includes(searchTerm) ? '' : 'none';
                        }
                    }
                });
            } else {
                console.error('æœç´¢æ¡†å…ƒç´ æœªæ‰¾åˆ°');
            }
        });
        
        // ä¿®æ”¹displayAsTableå‡½æ•°ï¼Œæ·»åŠ å¯¼å‡ºæŒ‰é’®
        function displayAsTable(data) {
            const tableContainer = document.getElementById('tableContainer');
            const filtersContainer = document.getElementById('filters');
            const categoryFilter = document.getElementById('categoryFilter');
            const sortSelect = document.getElementById('sortSelect');
            
            // Clear container
            tableContainer.innerHTML = '';
            
            // Create table
            const table = document.createElement('table');
            table.className = 'stats-table';
            
            // Create table header
            const thead = document.createElement('thead');
            thead.innerHTML = `
                <tr>
                    <th>Category</th>
                    <th>Item</th>
                    <th>Count</th>
                </tr>
            `;
            table.appendChild(thead);
            
            // Create table body
            const tbody = document.createElement('tbody');
            table.appendChild(tbody);
            
            // Function to render table with given data
            function renderTable(filteredData) {
                tbody.innerHTML = '';
                if (filteredData.length === 0) {
                    const emptyRow = document.createElement('tr');
                    emptyRow.innerHTML = '<td colspan="3" style="text-align: center;">No matching data</td>';
                    tbody.appendChild(emptyRow);
                    return;
                }
                
                filteredData.forEach(item => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td data-label="Category">${item.category}</td>
                <td data-label="Item" data-item-name="${item.item.toLowerCase()}">
                <button class="item-button" 
                        data-original-item="${item.originalItem}" 
                        data-original-category="${item.originalCategory}">
                    ${item.item}
                </button>
            </td>
                <td data-label="Count">${item.count.toLocaleString()}</td>
            `;
            tbody.appendChild(tr);
        });
        
        // æ·»åŠ ç‰©å“æŒ‰é’®ç‚¹å‡»äº‹ä»¶ç›‘å¬
            tbody.querySelectorAll('.item-button').forEach(button => {
                button.addEventListener('click', function() {
                    const originalItem = this.dataset.originalItem;
                    const originalCategory = this.dataset.originalCategory;
                    showItemRanking(originalItem, originalCategory);
                });
            });
            }
            
            // Function to sort data
            function sortData(dataToSort, sortType) {
                const sortedData = [...dataToSort];
                
                switch (sortType) {
                    case 'category':
                        return sortedData.sort((a, b) => a.category.localeCompare(b.category));
                    case 'count-asc':
                        return sortedData.sort((a, b) => a.count - b.count);
                    case 'count-desc':
                        return sortedData.sort((a, b) => b.count - a.count);
                    default:
                        return sortedData;
                }
            }
            
            // Initial render with sorted data
            let currentData = sortData(data, sortSelect.value);
            renderTable(currentData);
            
            // Add table to page
            tableContainer.appendChild(table);
            
            // Generate category filter options
            const categories = [...new Set(data.map(item => item.category))].sort();
            categoryFilter.innerHTML = '<option value="all">All Categories</option>';
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                categoryFilter.appendChild(option);
            });
            
            // Show filters
            filtersContainer.style.display = 'flex';
            
            // æ˜¾ç¤ºç‰©å“æœç´¢æ¡†
            const searchContainer = document.querySelector('.search-container');
            if (searchContainer) {
                searchContainer.style.display = 'block';
                
                // æ·»åŠ ç‰©å“æœç´¢åŠŸèƒ½
                const itemSearchInput = document.getElementById('item-search');
                if (itemSearchInput) {
                    itemSearchInput.addEventListener('input', function() {
                        const searchTerm = this.value.toLowerCase();
                        const itemRows = document.querySelectorAll('td[data-item-name]');
                        itemRows.forEach(td => {
                            const row = td.closest('tr');
                            const itemName = td.getAttribute('data-item-name');
                            row.style.display = itemName.includes(searchTerm) ? '' : 'none';
                        });
                    });
                }
            }

            

            // Handle filter and sort changes
            function handleFilterAndSort() {
                const selectedCategory = categoryFilter.value;
                const sortType = sortSelect.value;
                
                // Filter data
                let filteredData = selectedCategory === 'all' 
                    ? data 
                    : data.filter(item => item.category === selectedCategory);
                
                // Sort data
                filteredData = sortData(filteredData, sortType);
                
                // Re-render table
                renderTable(filteredData);
            }
            
            // Add event listeners
            categoryFilter.addEventListener('change', handleFilterAndSort);
            sortSelect.addEventListener('change', handleFilterAndSort);
        }

        // Handle file upload - ä¿®æ”¹
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            // Show file name
            document.getElementById('fileInfo').textContent = `Selected: ${file.name}`;
            
            // Show loading state
            document.getElementById('loading').style.display = 'block';
            document.getElementById('error').style.display = 'none';
            document.getElementById('tableContainer').innerHTML = '';
            document.getElementById('filters').style.display = 'none';

            // æ£€æŸ¥æ˜¯å¦ä¸ºZIPæ–‡ä»¶
            if (file.name.toLowerCase().endsWith('.zip')) {
                handleZipFile(file);
            } else if (file.name.toLowerCase() === 'usercache.json') {
                // å•ç‹¬å¤„ç†usercache.jsonæ–‡ä»¶
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        document.getElementById('loading').style.display = 'none';
                        const success = processUserCache(e.target.result);
                        if (success) {
                            document.getElementById('error').textContent = 'ç”¨æˆ·ç¼“å­˜æ•°æ®åŠ è½½æˆåŠŸï¼ç°åœ¨å¯ä»¥ä¸Šä¼ ç»Ÿè®¡æ•°æ®æ–‡ä»¶æˆ–ZIPå‹ç¼©åŒ…ã€‚';
                            document.getElementById('error').style.display = 'block';
                            document.getElementById('error').style.backgroundColor = '#d4edda';
                            document.getElementById('error').style.color = '#155724';
                            document.getElementById('error').style.borderColor = '#c3e6cb';
                            // å¦‚æœå·²æœ‰ç©å®¶æ•°æ®ï¼Œæ›´æ–°ç©å®¶åç§°
                            updatePlayerSelect();
                        } else {
                            document.getElementById('error').textContent = 'æ— æ³•è§£æusercache.jsonæ–‡ä»¶ã€‚è¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼ã€‚';
                            document.getElementById('error').style.display = 'block';
                        }
                    } catch (error) {
                        document.getElementById('loading').style.display = 'none';
                        document.getElementById('error').textContent = `è§£ææ–‡ä»¶æ—¶å‡ºé”™: ${error.message}`;
                        document.getElementById('error').style.display = 'block';
                    }
                };
                reader.readAsText(file);
            } else {
                // å¤„ç†å•ä¸ªç»Ÿè®¡æ•°æ®æ–‡ä»¶
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        document.getElementById('loading').style.display = 'none';
                        // å¤„ç†æ™®é€šç»Ÿè®¡æ•°æ®æ–‡ä»¶
                        const processedData = processMinecraftStats(e.target.result);

                        if (processedData && processedData.length > 0) {
                            // å°è¯•ä»æ–‡ä»¶åæå–UUID
                            const fileName = file.name;
                            const uuidMatch = fileName.match(/([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})/i);
                            let playerName = 'æœªçŸ¥ç©å®¶';
                            let uuid = null;

                            if (uuidMatch && uuidMatch[1]) {
                                uuid = uuidMatch[1];
                                playerName = getPlayerName(uuid);
                                // å­˜å‚¨ç©å®¶æ•°æ®
                                allPlayersStats[uuid] = processedData;
                                uuidToFilename[uuid] = fileName;
                            }

                            // åœ¨è¡¨æ ¼ä¸Šæ–¹æ˜¾ç¤ºç©å®¶åç§°
                            const tableContainer = document.getElementById('tableContainer');
                            tableContainer.innerHTML = `<h2>ç©å®¶: ${playerName}</h2>`;

                            displayAsTable(processedData);
                            // æ›´æ–°ç©å®¶é€‰æ‹©ä¸‹æ‹‰æ¡†
                            updatePlayerSelect();
                        } else {
                            document.getElementById('error').textContent = 'æœªæ‰¾åˆ°æœ‰æ•ˆæ•°æ®ã€‚è¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼ã€‚';
                            document.getElementById('error').style.display = 'block';
                        }
                    } catch (error) {
                        document.getElementById('loading').style.display = 'none';
                        document.getElementById('error').textContent = `è§£ææ–‡ä»¶æ—¶å‡ºé”™: ${error.message}`;
                        document.getElementById('error').style.display = 'block';
                    }
                };
                reader.readAsText(file);
            }
        });

        // æ·»åŠ å¤„ç†ZIPæ–‡ä»¶çš„å‡½æ•°
        function handleZipFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                JSZip.loadAsync(e.target.result)
                    .then(function(zip) {
                        // å­˜å‚¨è§£æçš„æ–‡ä»¶æ•°
                        let processedFiles = 0;
                        let totalFiles = 0;
                        let hasUserCache = false;

                        // å…ˆæ£€æŸ¥æ–‡ä»¶æ€»æ•°
                        zip.forEach(function(relativePath, zipEntry) {
                            totalFiles++;
                        });

                        // éå†ZIPä¸­çš„æ‰€æœ‰æ–‡ä»¶
                        zip.forEach(function(relativePath, zipEntry) {
                            if (zipEntry.name.toLowerCase() === 'usercache.json') {
                                // å¤„ç†usercache.json
                                zipEntry.async('text')
                                    .then(function(content) {
                                        processUserCache(content);
                                        hasUserCache = true;
                                        processedFiles++;
                                        checkIfAllFilesProcessed();
                                    })
                                    .catch(function(error) {
                                        console.error('è¯»å–usercache.jsonå¤±è´¥:', error);
                                        processedFiles++;
                                        checkIfAllFilesProcessed();
                                    });
                            } else if (zipEntry.name.toLowerCase().endsWith('.json')) {
                                // å¤„ç†ç»Ÿè®¡æ•°æ®æ–‡ä»¶
                                zipEntry.async('text')
                                    .then(function(content) {
                                        const fileName = zipEntry.name;
                                        const uuidMatch = fileName.match(/([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})/i);

                                        if (uuidMatch && uuidMatch[1]) {
                                            const uuid = uuidMatch[1];
                                            const processedData = processMinecraftStats(content);
                                            if (processedData && processedData.length > 0) {
                                                allPlayersStats[uuid] = processedData;
                                                uuidToFilename[uuid] = fileName;
                                            }
                                        }
                                        processedFiles++;
                                        checkIfAllFilesProcessed();
                                    })
                                    .catch(function(error) {
                                        console.error('è¯»å–JSONæ–‡ä»¶å¤±è´¥:', error);
                                        processedFiles++;
                                        checkIfAllFilesProcessed();
                                    });
                            } else {
                                processedFiles++;
                                checkIfAllFilesProcessed();
                            }
                        });

                        function checkIfAllFilesProcessed() {
                            if (processedFiles === totalFiles) {
                                document.getElementById('loading').style.display = 'none';
                                
                                if (Object.keys(allPlayersStats).length === 0) {
                                    document.getElementById('error').textContent = 'æœªæ‰¾åˆ°æœ‰æ•ˆçš„ç©å®¶ç»Ÿè®¡æ•°æ®æ–‡ä»¶ã€‚';
                                    document.getElementById('error').style.display = 'block';
                                } else {
                                    // æ›´æ–°ç©å®¶é€‰æ‹©ä¸‹æ‹‰æ¡†
                                    updatePlayerSelect();

                                    if (hasUserCache) {
                                        document.getElementById('error').textContent = 'ZIPæ–‡ä»¶è§£ææˆåŠŸï¼å·²åŠ è½½' + Object.keys(allPlayersStats).length + 'ä½ç©å®¶çš„æ•°æ®ã€‚';
                                        document.getElementById('error').style.display = 'block';
                                        document.getElementById('error').style.backgroundColor = '#d4edda';
                                        document.getElementById('error').style.color = '#155724';
                                        document.getElementById('error').style.borderColor = '#c3e6cb';
                                    } else {
                                        document.getElementById('error').textContent = 'ZIPæ–‡ä»¶è§£ææˆåŠŸï¼Œä½†æœªæ‰¾åˆ°usercache.jsonæ–‡ä»¶ã€‚ç©å®¶åç§°å°†æ˜¾ç¤ºä¸ºUUIDã€‚';
                                        document.getElementById('error').style.display = 'block';
                                        document.getElementById('error').style.backgroundColor = '#fff3cd';
                                        document.getElementById('error').style.color = '#856404';
                                        document.getElementById('error').style.borderColor = '#ffeeba';
                                    }

                                    // æ˜¾ç¤ºç¬¬ä¸€ä¸ªç©å®¶çš„æ•°æ®
                                    const firstUuid = Object.keys(allPlayersStats)[0];
                                    showPlayerStats(firstUuid);
                                }
                            }
                        }
                    })
                    .catch(function(error) {
                        document.getElementById('loading').style.display = 'none';
                        document.getElementById('error').textContent = `è§£æZIPæ–‡ä»¶æ—¶å‡ºé”™: ${error.message}`;
                        document.getElementById('error').style.display = 'block';
                    });
            };
            reader.readAsArrayBuffer(file);
        }

        // æ·»åŠ æ›´æ–°ç©å®¶é€‰æ‹©ä¸‹æ‹‰æ¡†çš„å‡½æ•°
        function updatePlayerSelect() {
    console.log('updatePlayerSelectè¢«è°ƒç”¨');
    let playerSelect = document.getElementById('playerSelect');
    if (!playerSelect) {
        // åˆ›å»ºç©å®¶é€‰æ‹©ä¸‹æ‹‰æ¡†
        const searchContainer = document.getElementById('playerSearchContainer');
        const filterGroup = document.createElement('div');
        filterGroup.className = 'filter-group';
        filterGroup.innerHTML = `
            <label for="playerSelect" class="filter-label">é€‰æ‹©ç©å®¶ï¼š</label>
            <select id="playerSelect" class="category-filter">
            </select>
        `;
        searchContainer.insertAdjacentElement('afterend', filterGroup);
        playerSelect = document.getElementById('playerSelect');

        playerSelect.addEventListener('change', function() {
            const selectedUuid = this.value;
            if (selectedUuid) {
                showPlayerStats(selectedUuid);
            }
        });
    }

    // å¡«å……ç©å®¶é€‰é¡¹
    playerSelect.innerHTML = '';
    Object.keys(allPlayersStats).forEach(uuid => {
        const playerName = getPlayerName(uuid);
        const option = document.createElement('option');
        option.value = uuid;
        option.textContent = `${playerName} (${uuidToFilename[uuid]})`;
        playerSelect.appendChild(option);
    });
}

        // æ·»åŠ æ˜¾ç¤ºç©å®¶ç»Ÿè®¡æ•°æ®çš„å‡½æ•°
        function showPlayerStats(uuid) {
            const processedData = allPlayersStats[uuid];
            if (processedData) {
                const playerName = getPlayerName(uuid);
                const tableContainer = document.getElementById('tableContainer');
                tableContainer.innerHTML = `<h2>ç©å®¶: ${playerName}</h2>`;
                displayAsTable(processedData);
            }
        }
        
        // æ·»åŠ ç‰©å“æ’è¡Œæ¦œå¼¹çª—åŠŸèƒ½
        function showItemRanking(itemName, category) {
    // æ”¶é›†æ‰€æœ‰ç©å®¶çš„è¯¥é¡¹æ•°æ®
    const playerItemData = [];
    
    for (const [uuid, stats] of Object.entries(allPlayersStats)) {
        // æ ¹æ®ä¼ å…¥çš„ç±»åˆ«ç­›é€‰æ•°æ®
        const found = stats.find(item => 
            item.originalItem === itemName && 
            item.originalCategory === category
        );
        
        if (found) {
            playerItemData.push({
                uuid: uuid,
                playerName: getPlayerName(uuid),
                count: found.count
            });
        }
    }
    
    // æŒ‰æ•°é‡ä»å¤§åˆ°å°æ’åº
    playerItemData.sort((a, b) => b.count - a.count);
    
    // æ›´æ–°å¼¹çª—æ ‡é¢˜ï¼Œæ˜¾ç¤ºç±»åˆ«ä¿¡æ¯
    document.getElementById('modalTitle').textContent = `${itemName} (${category}) æ’è¡Œæ¦œ`;
            
            // ç”Ÿæˆæ’è¡Œæ¦œè¡¨æ ¼
            let rankingHtml = `
                <table class="ranking-table">
                    <tr>
                        <th>æ’å</th>
                        <th>ç©å®¶</th>
                        <th>æ•°é‡</th>
                    </tr>
            `;
            
            playerItemData.forEach((item, index) => {
                rankingHtml += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${item.playerName}</td>
                        <td>${item.count.toLocaleString()}</td>
                    </tr>
                `;
            });
            
            rankingHtml += `</table>`;
            document.getElementById('rankingContainer').innerHTML = rankingHtml;
            
            // æ˜¾ç¤ºå¼¹çª—
            const modal = document.getElementById('rankingModal');
            modal.classList.add('show');
        }
        
        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        window.addEventListener('click', function(event) {
            const rankingModal = document.getElementById('rankingModal');
            const helpModal = document.getElementById('helpModal');
            const changelogModal = document.getElementById('changelogModal');
            
            if (event.target === rankingModal) {
                rankingModal.classList.remove('show');
            }
            
            if (event.target === helpModal) {
                helpModal.classList.remove('show');
            }
            
            if (event.target === changelogModal) {
                changelogModal.classList.remove('show');
            }
        });
    
        // ç¡®ä¿DOMåŠ è½½å®Œæˆåå†ç»‘å®šäº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            // å…³é—­æ’è¡Œæ¦œå¼¹çª—äº‹ä»¶
            const closeButton = document.querySelector('.close-button');
            if (closeButton) {
                closeButton.addEventListener('click', function() {
                    document.getElementById('rankingModal').classList.remove('show');
                });
            }
            
            // å…³é—­æ—¥å¿—å¼¹çª—äº‹ä»¶
            const closeButtonChangelog = document.querySelector('.close-button-changelog');
            if (closeButtonChangelog) {
                closeButtonChangelog.addEventListener('click', function() {
                    document.getElementById('changelogModal').classList.remove('show');
                });
            }
            
            // å¸®åŠ©æŒ‰é’®äº‹ä»¶
            const helpButton = document.getElementById('helpButton');
            if (helpButton) {
                helpButton.addEventListener('click', function() {
                    document.getElementById('helpModal').classList.add('show');
                });
            }
            
            // æ—¥å¿—æŒ‰é’®äº‹ä»¶
            const changelogButton = document.getElementById('changelogButton');
            if (changelogButton) {
                changelogButton.addEventListener('click', function() {
                    document.getElementById('changelogModal').classList.add('show');
                });
            }
            
            // å…³é—­æ•™ç¨‹å¼¹çª—äº‹ä»¶
            const closeButtonHelp = document.querySelector('.close-button-help');
            if (closeButtonHelp) {
                closeButtonHelp.addEventListener('click', function() {
                    document.getElementById('helpModal').classList.remove('show');
                });
            }
        });
    </script>
    
    <!-- ç‰©å“æ’è¡Œæ¦œå¼¹çª— -->
    <div id="rankingModal" class="modal">
        <div class="modal-content">
            <div class="modal-inner-content">
                <span class="close-button">&times;</span>
                <h2 id="modalTitle">ç‰©å“æ’è¡Œæ¦œ</h2>
                <div id="rankingContainer"></div>
            </div>
        </div>
    </div>
    <!-- æ•™ç¨‹æ¨¡æ€æ¡† -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-inner-content">
                <span class="close-button-help">&times;</span>
                <h2>ä½¿ç”¨æ•™ç¨‹</h2>
                <div id="helpContent">
                    <h3>æ”¯æŒçš„æ–‡ä»¶ç±»å‹</h3>
                    <p>æœ¬å·¥å…·æ”¯æŒä¸Šä¼ ä»¥ä¸‹ç±»å‹çš„æ–‡ä»¶ï¼š</p>
                    
                    <h4>1. usercache.json</h4>
                    <p>è¯¥æ–‡ä»¶åŒ…å«ç©å®¶UUIDä¸ç©å®¶åç§°çš„æ˜ å°„å…³ç³»ï¼Œé€šå¸¸ä½äºMinecraftæœåŠ¡å™¨çš„<code>world</code>ç›®å½•ä¸‹ã€‚</p>
                    <p><strong>æ ¼å¼è¦æ±‚ï¼š</strong></p>
                    <pre>[{"uuid": "ç©å®¶UUID","name": "ç©å®¶åç§°","expiresOn": "è¿‡æœŸæ—¶é—´"}]</pre>
                    <p><strong>ä¸Šä¼ æ•ˆæœï¼š</strong> ä¸Šä¼ åï¼Œå·¥å…·å¯ä»¥å°†UUIDè½¬æ¢ä¸ºç©å®¶åç§°ï¼Œä½¿ç»Ÿè®¡æ•°æ®æ›´æ˜“è¯»ã€‚</p>
                    
                    <h4><a href="translations.json" style="text-decoration: none;" target="_blank">2. translations.jsonï¼ˆç‚¹å‡»æµè§ˆï¼‰</a></h4>
                    <p>å·²è‡ªå¸¦åŸç‰ˆç‰©å“/æ–¹å—/åŠ¨ä½œç¿»è¯‘åŒ…ï¼Œè‹¥æ— éåŸç‰ˆå†…å®¹æ— éœ€ä¸Šä¼ ã€‚è¯¥æ–‡ä»¶åŒ…å«ç‰©å“IDä¸ç‰©å“åç§°çš„ç¿»è¯‘æ˜ å°„ï¼Œç”¨äºå°†æ¸¸æˆå†…çš„ç‰©å“IDè½¬æ¢ä¸ºå¯è¯»çš„åç§°ã€‚</p>
                    <p><strong>æ ¼å¼è¦æ±‚ï¼š</strong></p>
    <pre>{
        "category": {
            "killed": "å‡»æ€",
            "killed_by": "è¢«å‡»æ€",
        },
        "item":{
            "acacia_boat": "é‡‘åˆæ¬¢æœ¨èˆ¹",
            "acacia_chest_boat": "é‡‘åˆæ¬¢æœ¨è¿è¾“èˆ¹",
            "allay_spawn_egg": "æ‚¦çµåˆ·æ€ªè›‹",
        }
    }</pre>
                    <p><strong>ä¸Šä¼ æ•ˆæœï¼š</strong> ä¸Šä¼ åï¼Œå·¥å…·ä¼šä½¿ç”¨ç¿»è¯‘åçš„åç§°æ˜¾ç¤ºç‰©å“ï¼Œè€Œä¸æ˜¯åŸå§‹IDã€‚</p>
                    
                    <h4>3. ç©å®¶ç»Ÿè®¡æ•°æ®æ–‡ä»¶ (.json)</h4>
                    <p>è¿™äº›æ–‡ä»¶åŒ…å«å•ä¸ªç©å®¶çš„æ¸¸æˆç»Ÿè®¡æ•°æ®ï¼Œé€šå¸¸ä½äºMinecraftæœåŠ¡å™¨çš„<code>world/stats</code>ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åé€šå¸¸ä¸ºç©å®¶UUID.jsonã€‚</p>
                    <p><strong>ä¸Šä¼ æ•ˆæœï¼š</strong> ä¸Šä¼ åï¼Œå·¥å…·ä¼šè§£æå¹¶æ˜¾ç¤ºç©å®¶çš„è¯¦ç»†ç»Ÿè®¡æ•°æ®ï¼ŒåŒ…æ‹¬æŒ–æ˜ã€æ”¾ç½®ã€å‡»æ€ç­‰å„ç±»æ•°æ®ã€‚</p>
                    
                    <h4>4. ZIPå‹ç¼©åŒ…</h4>
                    <p>æ‚¨å¯ä»¥å°†å¤šä¸ªç»Ÿè®¡æ•°æ®æ–‡ä»¶æ‰“åŒ…æˆZIPæ ¼å¼ä¸Šä¼ ï¼Œå·¥å…·ä¼šè‡ªåŠ¨è§£å‹å¹¶å¤„ç†å…¶ä¸­çš„æ‰€æœ‰æœ‰æ•ˆæ–‡ä»¶ã€‚</p>
                    
                    <h3>ä½¿ç”¨æ­¥éª¤</h3>
                    <ol>
                        <li>ç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"æŒ‰é’®æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸ</li>
                        <li>é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼ˆå¯ä»¥æ˜¯å•ä¸ªæ–‡ä»¶æˆ–ZIPå‹ç¼©åŒ…ï¼‰</li>
                        <li>ç­‰å¾…æ–‡ä»¶è§£æå®Œæˆ</li>
                        <li>ä½¿ç”¨é¡µé¢ä¸Šçš„ç­›é€‰å™¨å’Œæœç´¢æ¡†æŸ¥çœ‹ç»Ÿè®¡æ•°æ®</li>
                        <li>ç‚¹å‡»è¡¨æ ¼ä¸­çš„ç‰©å“åç§°å¯ä»¥æŸ¥çœ‹è¯¥ç‰©å“çš„ç©å®¶æ’è¡Œæ¦œ</li>
                    </ol>
                    <h3>å…¶ä»–ä¿¡æ¯</h3>
                    <ol>
                        <li>æœ¬é¡µé¢ç”±Trae_CNç»“åˆè±†åŒ…AIç”Ÿæˆ</li>
                        <li>æœ¬é¡µé¢ç”±Boring Minecraftç”Ÿç”µæœåŠ¡å™¨æä¾›æ”¯æŒï¼Œ Boring Minecraft æ˜¯ä¸€ä¸ªå’Œè°å‹çˆ±çš„å¤§å®¶åº­ï¼Œæ”¯æŒå›½é™…ç‰ˆJavaå’ŒåŸºå²©ç‰ˆï¼Œå…¥æœæ— é—¨æ§›ï¼Œæ¬¢è¿æ¯ä¸€ä½ä¼‘é—²ã€ç”Ÿç”µã€å»ºç­‘ç©å®¶ï¼Œç¾¤å·ï¼š897624943~</li>
                        <li>æœ¬é¡µé¢ç”±çƒ­é“ç›’æ‰˜ç®¡</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <!-- æ—¥å¿—æ¨¡æ€æ¡† -->
    <div id="changelogModal" class="modal">
        <div class="modal-content">
            <div class="modal-inner-content">
                <span class="close-button-changelog">&times;</span>
                <h2>bugä¿®å¤æ—¥å¿—</h2>
                <div id="changelogContent">
                    <h3>2025072303_æœç´¢æ¡†Bugä¿®å¤</h3>
                    <h4>é—®é¢˜ç°è±¡</h4>
                    <p>æœç´¢æ¡†å¤±æ•ˆ</p>
                    <h4>é—®é¢˜åŸå› </h4>
                    <p>ä¿®ä¸Šä¸€ä¸ªbugçš„æ—¶å€™å¼•å‘æ­¤bug</p>
                    <h3>2025072302_Minecraftæ’åºbugä¿®å¤æ—¥å¿—</h3>
                    <h4>é—®é¢˜ç°è±¡</h4>
                    <p>æ’åºååˆ‡æ¢ç©å®¶ï¼Œæ’åºæ•ˆæœå¾—ä¸åˆ°ä¿ç•™</p>
                    <h4>ä¿®å¤æ–¹æ¡ˆ</h4>
                    <p>åˆ‡æ¢ç©å®¶é»˜è®¤ä½¿ç”¨å·²é€‰ä¸­æ’åº</p>
                    <h3>2025072301_Minecraftç»Ÿè®¡æ•°æ®æ’è¡Œæ¦œbugä¿®å¤æ—¥å¿—</h3>
                    <h4>é—®é¢˜ç°è±¡</h4>
                    <p>åˆ†ææœåŠ¡å™¨statsæ–‡ä»¶æ—¶å‘ç°å‡äººxekrçš„åƒµå°¸çŒªçµå‡»æ€æ•°æ®åœ¨æ’è¡Œæ¦œä¸­æ˜¾ç¤ºé”™è¯¯ï¼šåŸæœ¬åº”è¯¥æ˜¾ç¤ºå…¶<strong>å‡»æ€åƒµå°¸çŒªçµ6,917,927æ¬¡</strong>ï¼Œä½†å®é™…å´æ˜¾ç¤ºä¸º<strong>è¢«åƒµå°¸çŒªçµå‡»æ€1æ¬¡</strong>ã€‚</p>

                    <h4>é—®é¢˜åŸå› </h4>
                    <p>é€šè¿‡ä»£ç åˆ†æï¼Œå‘ç°é—®é¢˜æ ¹æºåœ¨äºç»Ÿè®¡æ•°æ®å¤„ç†é€»è¾‘ä¸­æ··æ·†äº†<code>killed</code>å’Œ<code>killed_by</code>ä¸¤ä¸ªä¸åŒçš„ç»Ÿè®¡å­—æ®µï¼š</p>
                    <ol>
                        <li>åœ¨<code>processMinecraftStats</code>å‡½æ•°ä¸­ï¼Œè§£æç©å®¶æ•°æ®æ—¶ç§»é™¤äº†<code>minecraft:</code>å‰ç¼€å¹¶ä½¿ç”¨ç¿»è¯‘è¡¨å°†IDè½¬æ¢ä¸ºæ˜¾ç¤ºåç§°ï¼Œä½†æœªä¿ç•™åŸå§‹ç»Ÿè®¡ç±»åˆ«ID</li>
                        <li>ç”±äºç¼ºä¹åŸå§‹ç±»åˆ«æ ‡è¯†ï¼Œæ’è¡Œæ¦œåŠŸèƒ½æ— æ³•åŒºåˆ†<code>killed</code>ï¼ˆä¸»åŠ¨å‡»æ€ï¼‰å’Œ<code>killed_by</code>ï¼ˆè¢«å‡»æ€ï¼‰ä¸¤ç§ä¸åŒç»Ÿè®¡ç±»å‹</li>
                        <li>ç‚¹å‡»ç‰©å“æŸ¥çœ‹æ’è¡Œæ¦œæ—¶ï¼Œé»˜è®¤ä½¿ç”¨äº†ç¿»è¯‘åçš„åç§°è¿›è¡ŒåŒ¹é…ï¼Œå¯¼è‡´é”™è¯¯åœ°æ˜¾ç¤ºäº†è¢«å‡»æ€æ•°æ®è€Œéå‡»æ€æ•°æ®</li>
                    </ol>

                    <h4>ä¿®å¤æ–¹æ¡ˆ</h4>
                    <ol>
                        <li><strong>æ•°æ®å¤„ç†é€»è¾‘ä¼˜åŒ–</strong>ï¼šä¿®æ”¹<code>processMinecraftStats</code>å‡½æ•°ï¼Œåœ¨è¿”å›ç»“æœä¸­æ–°å¢<code>originalCategory</code>å’Œ<code>originalItem</code>å­—æ®µä¿ç•™åŸå§‹ID</li>
                        <li><strong>æ’è¡Œæ¦œç­›é€‰é€»è¾‘ä¿®å¤</strong>ï¼šæ›´æ–°<code>showItemRanking</code>å‡½æ•°ï¼Œæ·»åŠ <code>originalCategory === 'killed'</code>æ¡ä»¶ç­›é€‰ä¸»åŠ¨å‡»æ€æ•°æ®</li>
                        <li><strong>UIäº¤äº’ä¼˜åŒ–</strong>ï¼šä¿®æ”¹<code>renderTable</code>å‡½æ•°ï¼Œä¸ºç‰©å“æŒ‰é’®æ·»åŠ <code>data-original-item</code>å’Œ<code>data-original-category</code>å±æ€§å­˜å‚¨åŸå§‹ID</li>
                    </ol>

                    <h4>ä¿®å¤æ•ˆæœ</h4>
                    <p>ä¿®å¤åï¼Œç‚¹å‡»åƒµå°¸çŒªçµç‰©å“æŸ¥çœ‹æ’è¡Œæ¦œæ—¶ï¼Œå°†æ­£ç¡®æ˜¾ç¤ºç©å®¶xekrçš„6,917,927æ¬¡å‡»æ€æ•°æ®ï¼Œè€Œéä¹‹å‰é”™è¯¯æ˜¾ç¤ºçš„1æ¬¡è¢«å‡»æ€æ•°æ®ã€‚åŒæ—¶ï¼Œç³»ç»Ÿèƒ½å¤Ÿæ­£ç¡®åŒºåˆ†ä¸åŒç»Ÿè®¡ç±»å‹ï¼Œç¡®ä¿æ‰€æœ‰ç©å®¶çš„å„ç±»ç»Ÿè®¡æ•°æ®å‡†ç¡®å±•ç¤ºã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* å¼¹çª—æ ·å¼ */
        .modal {
            visibility: hidden; /* æ›¿æ¢ display: none */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: rgba(0,0,0,0.4);
            opacity: 0;
            transition: visibility 0.3s ease, opacity 0.3s ease; /* æ·»åŠ  visibility è¿‡æ¸¡ */
        }

        .modal.show {
            visibility: visible; /* æ›¿æ¢ display: block */
            opacity: 1;
        }

        .modal-content {
            background-color: #fefefe;
            margin: 3% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 900px;
            max-height: 85vh;
            overflow: hidden; /* ä¿æŒå¤–éƒ¨å®¹å™¨æº¢å‡ºéšè— */
            box-sizing: border-box;
            border-radius: 10px;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            display: flex; /* æ·»åŠ flexå¸ƒå±€ */
            flex-direction: column; /* å‚ç›´æ’åˆ—å­å…ƒç´  */
        }

        /* ä¿®æ”¹å†…éƒ¨å®¹å™¨æ ·å¼ */
        .modal-inner-content {
            max-height: 70vh; /* é™åˆ¶æœ€å¤§é«˜åº¦ä¸ºè§†å£é«˜åº¦çš„70% */
            overflow-y: auto; /* æ·»åŠ å‚ç›´æ»šåŠ¨æ¡ */
            padding: 20px;
        }

        /* ä¸ºå¼¹çª—å†…çš„æ ‡é¢˜å’Œæ®µè½æ·»åŠ é—´è· */
        .modal-inner-content h2 {
            margin-bottom: 20px;
        }

        .modal-inner-content h3 {
            margin-bottom: 15px;
            margin-top: 25px;
        }

        .modal-inner-content h4 {
            margin-bottom: 10px;
            margin-top: 20px;
        }

        .modal-inner-content p {
            margin-bottom: 15px;
        }

        .modal-inner-content ol,
        .modal-inner-content ul {
            margin-bottom: 15px;
            padding-left: 25px;
        }

        /* éšè—æ»šåŠ¨æ¡çš„æ ·å¼ä¿æŒä¸å˜ */
        /* ä¿®æ”¹æ»šåŠ¨æ¡æ ·å¼ - ç§»é™¤éšè—è®¾ç½®ï¼Œæ·»åŠ çª„æ»šåŠ¨æ¡å®šä¹‰ */
        .modal-inner-content::-webkit-scrollbar {
            width: 4px; /* çª„æ»šåŠ¨æ¡å®½åº¦ */
        }

        .modal-inner-content::-webkit-scrollbar-track {
            background: #f1f1f1; /* æ»šåŠ¨æ¡è½¨é“èƒŒæ™¯ */
            border-radius: 2px;
        }

        .modal-inner-content::-webkit-scrollbar-thumb {
            background: #888; /* æ»šåŠ¨æ¡æ»‘å—é¢œè‰² */
            border-radius: 2px;
        }

        .modal-inner-content::-webkit-scrollbar-thumb:hover {
            background: #555; /* æ»šåŠ¨æ¡æ»‘å—æ‚¬åœé¢œè‰² */
        }

        .modal-inner-content {
            scrollbar-width: thin; /* Firefox çª„æ»šåŠ¨æ¡ */
            scrollbar-color: #888 #f1f1f1; /* Firefox æ»‘å—å’Œè½¨é“é¢œè‰² */
        }

        .modal.show .modal-content {
            transform: scale(1);
        }
        
        .close-button, .close-button-help, .close-button-changelog {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close-button:hover, .close-button-help:hover, .close-button-changelog:hover {
            color: black;
        }
        
        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .ranking-table th, .ranking-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .ranking-table th {
            background-color: #f2f2f2;
        }
        
        .item-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 5px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 2px 1px;
            cursor: pointer;
            border-radius: 4px;
        }
        
        /* æ•™ç¨‹å†…å®¹æ ·å¼ */
        #helpContent h3 {
            margin-top: 20px;
            color: #333;
        }
        
        #helpContent h4 {
            margin-top: 15px;
            color: #555;
        }
        
        #helpContent p {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        #helpContent pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            margin: 10px 0;
        }
        
        #helpContent code {
            font-family: monospace;
            background-color: #eee;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        #helpContent ol {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        #helpContent li {
            margin-bottom: 5px;
        }
        
        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
        /* Firefoxæµè§ˆå™¨æ»šåŠ¨æ¡æ ·å¼ */
        * {
            scrollbar-width: thin; /* ç»†æ»šåŠ¨æ¡ */
            scrollbar-color: #888 #f1f1f1; /* æ»‘å—é¢œè‰² è½¨é“é¢œè‰² */
        }
        
        .modal-content {
            scrollbar-width: auto; /* å¼¹çª—ä½¿ç”¨è‡ªåŠ¨å®½åº¦ï¼ˆä»ä¼šæ¯”é»˜è®¤ç»†ï¼‰ */
        }
        
        ::-webkit-scrollbar {
            width: 6px;  /* å‚ç›´æ»šåŠ¨æ¡å®½åº¦ */
            height: 6px; /* æ°´å¹³æ»šåŠ¨æ¡é«˜åº¦ */
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1; /* æ»šåŠ¨æ¡è½¨é“èƒŒæ™¯è‰² */
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888; /* æ»šåŠ¨æ¡æ»‘å—é¢œè‰² */
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555; /* æ»šåŠ¨æ¡æ»‘å—æ‚¬åœé¢œè‰² */
        }
        
        /* å¼¹çª—å†…å®¹åŒºåŸŸæ»šåŠ¨æ¡æ ·å¼ */
        .modal-content::-webkit-scrollbar {
            width: 4px;  /* å¼¹çª—å‚ç›´æ»šåŠ¨æ¡æ›´ç»† */
        }
    </style>
    
    <!-- æ·»åŠ åº•éƒ¨è¶…é“¾æ¥é•¿æ¡ -->
    <div style="background-color: #f1f1f1; padding: 10px 0; text-align: center; position: fixed; bottom: 0; width: 100%; z-index: 999;">
        <a href="https://mffyg.lanzoum.com/iO06H31hlykh" target="_blank" style="margin: 0 15px; color: #333; text-decoration: none;">ç¤ºä¾‹å‹ç¼©åŒ…</a> |
        <a href="https://www.kdocs.cn/l/cgGYMvid44Fv" target="_blank" style="margin: 0 15px; color: #333; text-decoration: none;">Boring Minecraft ç”Ÿç”µæœåŠ¡å™¨</a> |
        <a href="https://www.retiehe.com/" target="_blank" style="margin: 0 15px; color: #333; text-decoration: none;">çƒ­é“ç›’</a>
    </div>
</body>
</html>
